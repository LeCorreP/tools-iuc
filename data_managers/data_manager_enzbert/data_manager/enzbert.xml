<tool id="data_manager_enzbert" name="enzbert data manager" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" tool_type="manage_data" profile="21.05">
    <macros>
        <token name="@TOOL_VERSION@">1.1</token>
        <token name="@VERSION_SUFFIX@">0</token>
    </macros>
    <command detect_errors="exit_code"><![CDATA[       
        set -o pipefail;

        mkdir '$output_dir' && cd '$output_dir' &&
        wget -O 'data.zip' 'https://zenodo.org/records/10041121/files/data.zip?download=1' && unzip 'data.zip' &&
        if [[ ! -d 'data' ]]; then >&2 echo "data missing"; exit 1; fi &&
        cp '$dmjson' '$output_file' 
    ]]></command>
    <configfiles>
        <configfile name="dmjson"><![CDATA[#slurp
#import datetime
#set now = datetime.datetime.now().strftime("%Y-%m-%d")
#set value = "Enzbert_model" 
#set path = str($output_dir)
{
  "data_tables": {
    "enzbert": [
      {
        "value": "$value", 
        "name": "Enzbert_model",
        "path": "$path"
        
      }
    ]
  }
}]]></configfile>
    </configfiles>
    <inputs>
        <param name="output_dir" type="text" label="Output Directory" value=""/>    
    </inputs>
    <outputs>
        <data name="output_file" format="data_manager_json" label="Enzbert data manager: JSON"/>
    </outputs>
    <tests>
        <test>
            <param name="output_dir" value="enzbert"/>
            <output name="output_file" file="out.json" compare="sim_size">
            </output>
        </test>        
    </tests>
    <help><![CDATA[
        This data manager retrieves Enzbert model data.
    ]]></help>
    <citations>
        <citation type="doi">https://doi.org/10.5281/zenodo.10041121</citation>
    </citations>
</tool>